@model List<InnowiseFridgeClient.ViewModels.FridgeViewModel>

@{
}

<a class="nav-link text-dark" asp-area="" asp-controller="Fridge" asp-action="Add">Add fridge</a>

<h1 class="text-danger">@ViewBag.Error</h1>

<h2>Страница с холодильниками:</h2>

<table class="table">
    <thead>
        <tr>
            <th>Id</th>
            <th>Name</th>
            <th>OwnerName</th>
            <th>Add products</th>
            <th>Edit</th>
            <th>Delete</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var fridge in Model)
        {
            <tr>
                <td>@fridge.Id</td>
                <td>@fridge.Name</td>
                <td>@fridge.OwnerName</td>
                @if (@ViewBag.UserName == fridge.OwnerName)
                {
                    <td>
                        <a class="nav-link text-dark" asp-area="" asp-controller="Fridge" asp-action="Products" asp-route-fridgeId="@fridge.Id">Products</a>
                    </td>
                    <td>
                        <a class="nav-link text-dark" asp-area="" asp-controller="Fridge" asp-action="Edit" asp-route-id="@fridge.Id">Edit</a>
                    </td>       
                    <td>
                         <form asp-area="" asp-controller="Fridge" asp-action="Delete" asp-route-id="@fridge.Id" method="post">
                             <button type="submit" class="nav-link text-dark" onclick="return confirm('Are you sure you want to delete this item?');">Delete</button>
                         </form>
                    </td>  
              
                }

            </tr>
        }
    </tbody>
</table>
@* *@
@* <script> *@
@*     function confirmDelete(id) { *@
@*         var result = window.confirm("Are you sure you want to delete this item?"); *@
@* *@
@*         if (result) { *@
@*             deleteFridge(id); *@
@*         } else { *@
@*         } *@
@*     } *@
@* *@
@*     async function deleteFridge(id) { *@
@*         try { *@
@*             const response = await fetch(`http://localhost:5145/api/Fridge/${id}`, { *@
@*                 method: 'DELETE' *@
@*             }); *@
@* *@
@*             if (response.ok) { *@
@*                 location.reload();  *@
@*             } else { *@
@*                 console.error('Failed to delete'); *@
@*             } *@
@*         } catch (error) { *@
@*             console.error('Error:', error); *@
@*         } *@
@*     } *@
@* </script> *@
